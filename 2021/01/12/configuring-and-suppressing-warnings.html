<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Configuring and suppressing warnings in Scala | The Scala Programming Language</title>
    
    <meta property="og:title" content="Configuring and suppressing warnings in Scala"/>
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@scala_lang"/>
    <meta name="twitter:creator" content="@scala_lang"/>
    
    <meta property="og:url" content="http://localhost:4000/2021/01/12/configuring-and-suppressing-warnings.html"/>
    
    <meta property="og:image" content="http://localhost:4000/resources/img/scala-spiral-3d-2-toned-down.png"/>

    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link rel="icon" type="image/png" href="/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-16x16.png">
    <link rel="manifest" href="/resources/site.webmanifest">
    <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
      integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
      crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- Custom stylesheet -->
    <link href="/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/unslider.css" rel="stylesheet" type="text/css">
    
    <link rel="stylesheet" href="/resources/css/highlightjs.css" type="text/css" />
    
    <link rel="stylesheet" href="/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/vendor/codemirror.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/vendor/monokai.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/monospace.css" type="text/css" />

    <!-- Typekit (should stay at top of page, do not move to footer)-->
    <!--<script type="text/javascript" src="//use.typekit.net/abh3wgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script> -->

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="/feed/blog.xml" />


  </head>
  <body>

<div class="navigation-fade-screen"></div>

<header id="site-header">
	<div class="wrap">
		<nav class="navigation" role="menu">
			<a href="/" class="navigation-bdand">
				<img src="/resources/img/frontpage/scala-logo-white@2x.png" alt="">
			</a>
			<div class="navigation-panel-button">
				<i class="fa fa-bars"></i>
			</div>
			<ul class="navigation-menu">
				
				    <li class="navigation-menu-item">
                    <a href="https://docs.scala-lang.org" >Learn</a>
				    </li>
				
				    <li class="navigation-menu-item">
                    <a href="/download/" >Install</a>
				    </li>
				
				    <li class="navigation-menu-item">
                    <a href="https://scastie.scala-lang.org" >Playground</a>
				    </li>
				
				    <li class="navigation-menu-item">
                    <a href="https://index.scala-lang.org" >Find a Library</a>
				    </li>
				
				    <li class="navigation-menu-item">
                    <a href="/community/" >Community</a>
				    </li>
				
				    <li class="navigation-menu-item">
                    <a href="/blog/" >Blog</a>
				    </li>
				
			</ul>
		</nav>
	</div>
</header>


<main id="inner-main">

	<!-- Title -->
	<section class="title-page">
		<div class="wrap">
			<h1>Configuring and suppressing warnings in Scala</h1>
		</div>
	</section>

	
	<!-- Main content -->
<section class="content">
	<div class="wrap">
		<div class="content-primary">
			<div class="inner-box">
				<div class="blog-detail-head">
					<div>
						<p>Tuesday 12 January 2021</p>
						<p>Lukas Rytz</p>
					</div>
					
					<ul class="tag-list">
						
					</ul>
					
					</div>
					<div class="filter-tag"></div>
					<!-- <h2><a href="/2021/01/12/configuring-and-suppressing-warnings.html">Configuring and suppressing warnings in Scala</a></h2> -->
					<p>Scala 2.13.2 introduced the <code class="language-plaintext highlighter-rouge">-Wconf</code> compiler flag to globally configure reporting of warnings, and the <code class="language-plaintext highlighter-rouge">@nowarn</code> annotation to locally suppress them. This addition to Scala 2.13 proved very popular, so it was backported to 2.12 and just released in 2.12.13. Having more control over compiler warnings makes them a lot more valuable:</p>

<ul>
  <li>In projects where the build log shows a lot of warnings that are mostly ignored, new helpful warnings can easily go undetected. The new functionality can be used to clean up the build log with manageable efforts and potentially enable fatal warnings (<code class="language-plaintext highlighter-rouge">-Werror</code> in 2.13, <code class="language-plaintext highlighter-rouge">-Xfatal-warnings</code> in 2.12). This has happened for example in the Scala compiler and standard library projects in the past few months â€“ thank you, <a href="https://github.com/NthPortal">@NthPortal</a> and <a href="https://github.com/som-snytt">@som-snytt</a>!</li>
  <li>Projects that already use fatal warnings get better utilities to work around corner cases where a warning cannot be avoided. This can allow further <code class="language-plaintext highlighter-rouge">-Xlint</code> checks to be enabled.</li>
</ul>

<p>In this post we go through the mechanics of configuring warnings and also look at the new <code class="language-plaintext highlighter-rouge">@nowarn</code> annotation.</p>

<h2 id="warnings-from-the-scala-compiler">Warnings from the Scala compiler</h2>

<p>We start off by recapping some of the most common scenarios where the Scala compiler emits warnings. A first category is suspicious code that is likely the result of a programming mistake:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="s">""</span>
         <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">comparing</span> <span class="kt">values</span> <span class="kt">of</span> <span class="k">type</span><span class="kt">s</span> <span class="kt">Int</span> <span class="kt">and</span> <span class="kt">String</span> <span class="kt">using</span> <span class="kt">`==`</span> <span class="kt">will</span> <span class="kt">always</span> <span class="kt">yield</span> <span class="kt">false</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="n">x</span><span class="o">;</span> <span class="n">x</span> <span class="o">}</span>
                         <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">a</span> <span class="kt">pure</span> <span class="kt">expression</span> <span class="kt">does</span> <span class="kt">nothing</span> <span class="kt">in</span> <span class="kt">statement</span> <span class="kt">position</span><span class="o">;</span>
       <span class="n">multiline</span> <span class="n">expressions</span> <span class="n">might</span> <span class="n">require</span> <span class="n">enclosing</span> <span class="n">parentheses</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
                             <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">enclosing</span> <span class="kt">method</span> <span class="kt">f</span> <span class="kt">has</span> <span class="kt">result</span> <span class="k">type</span> <span class="kt">Unit:</span> <span class="kt">return</span> <span class="kt">value</span> <span class="kt">of</span> <span class="k">type</span> <span class="kt">Int</span> <span class="kt">discarded</span>
</code></pre></div></div>

<p>Warnings about non-exhaustive pattern matches and uncheckable type arguments are also issued by default (note that exhaustivity warnings just received a big upgrade in <a href="https://github.com/scala/scala/releases/tag/v2.13.4">Scala 2.13.4</a>):</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">get</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">o</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">T</span><span class="o">])</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="n">o</span> <span class="k">match</span> <span class="o">{</span> <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">t</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">t</span> <span class="o">}</span>
                                     <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">match</span> <span class="kt">may</span> <span class="kt">not</span> <span class="kt">be</span> <span class="kt">exhaustive.</span>
       <span class="kt">It</span> <span class="kt">would</span> <span class="kt">fail</span> <span class="kt">on</span> <span class="kt">the</span> <span class="kt">following</span> <span class="kt">input:</span> <span class="kt">None</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="o">(</span><span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Any</span><span class="o">])</span> <span class="k">=</span> <span class="n">l</span> <span class="k">match</span> <span class="o">{</span> <span class="k">case</span> <span class="n">l</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nv">l</span><span class="o">.</span><span class="py">sum</span><span class="o">;</span> <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="nv">l</span><span class="o">.</span><span class="py">length</span> <span class="o">}</span>
                                               <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">non-variable</span> <span class="k">type</span> <span class="kt">argument</span> <span class="kt">Int</span> <span class="kt">in</span> <span class="k">type</span> <span class="kt">pattern</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
       <span class="n">is</span> <span class="n">unchecked</span> <span class="n">since</span> <span class="n">it</span> <span class="n">is</span> <span class="n">eliminated</span> <span class="n">by</span> <span class="n">erasure</span>
</code></pre></div></div>

<p>Annotating the scrutinee with <code class="language-plaintext highlighter-rouge">@unchecked</code> disables exhaustivity checking: <code class="language-plaintext highlighter-rouge">(o: @unchecked) match ...</code>. Similarly, unchecked warnings are not issued for annotated type arguments: <code class="language-plaintext highlighter-rouge">case l: List[Int @unchecked] =&gt; ...</code>.</p>

<p>Warnings about using deprecated features or APIs are not issued individually by default, but counted and summarized. The same applies to feature warnings, which warn about using advanced language features that are not generally encouraged.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">$</span><span class="o">&gt;</span> <span class="n">scalac</span> <span class="nv">Test</span><span class="o">.</span><span class="py">scala</span>
<span class="n">warning</span><span class="k">:</span> <span class="err">1</span> <span class="kt">deprecation</span> <span class="o">(</span><span class="kt">since</span> <span class="err">2</span><span class="kt">.</span><span class="err">13</span><span class="kt">.</span><span class="err">0</span><span class="o">)</span>
<span class="kt">warning:</span> <span class="err">1</span> <span class="kt">deprecation</span> <span class="o">(</span><span class="kt">since</span> <span class="err">2</span><span class="kt">.</span><span class="err">13</span><span class="kt">.</span><span class="err">3</span><span class="o">)</span>
<span class="kt">warning:</span> <span class="err">2</span> <span class="kt">deprecations</span> <span class="kt">in</span> <span class="kt">total</span><span class="o">;</span> <span class="n">re</span><span class="o">-</span><span class="n">run</span> <span class="k">with</span> <span class="o">-</span><span class="n">deprecation</span> <span class="k">for</span> <span class="n">details</span>
<span class="n">warning</span><span class="k">:</span> <span class="err">1</span> <span class="kt">feature</span> <span class="kt">warning</span><span class="o">;</span> <span class="n">re</span><span class="o">-</span><span class="n">run</span> <span class="k">with</span> <span class="o">-</span><span class="n">feature</span> <span class="k">for</span> <span class="n">details</span>
<span class="mi">4</span> <span class="n">warnings</span>
</code></pre></div></div>

<p>Using <code class="language-plaintext highlighter-rouge">-deprecation</code> and <code class="language-plaintext highlighter-rouge">-feature</code> these warnings are reported individually. As we will see later, these two flags are shorthands for changing the <code class="language-plaintext highlighter-rouge">-Wconf</code> configuration.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">$</span><span class="o">&gt;</span> <span class="n">scalac</span> <span class="nv">Test</span><span class="o">.</span><span class="py">scala</span> <span class="o">-</span><span class="n">deprecation</span> <span class="o">-</span><span class="n">feature</span>
<span class="nv">Test</span><span class="o">.</span><span class="py">scala</span><span class="k">:</span><span class="err">2</span><span class="kt">:</span> <span class="kt">warning:</span> <span class="kt">method</span> <span class="kt">â†’</span> <span class="kt">in</span> <span class="kt">class</span> <span class="kt">ArrowAssoc</span> <span class="kt">is</span> <span class="kt">deprecated</span> <span class="o">(</span><span class="kt">since</span> <span class="err">2</span><span class="kt">.</span><span class="err">13</span><span class="kt">.</span><span class="err">0</span><span class="o">)</span><span class="kt">:</span> <span class="kt">Use</span> <span class="kt">`-&gt;`</span> <span class="kt">instead</span> <span class="o">[</span><span class="kt">...</span><span class="o">]</span>
  <span class="k">def</span> <span class="nf">f</span><span class="o">()</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">â†’</span> <span class="mi">2</span>
              <span class="o">^</span>
<span class="nv">Test</span><span class="o">.</span><span class="py">scala</span><span class="k">:</span><span class="err">3</span><span class="kt">:</span> <span class="kt">warning:</span> <span class="kt">Auto-application</span> <span class="kt">to</span> <span class="kt">`</span><span class="o">()</span><span class="kt">`</span> <span class="kt">is</span> <span class="kt">deprecated</span> <span class="o">[</span><span class="kt">...</span><span class="o">]</span>
  <span class="k">def</span> <span class="nf">g</span> <span class="k">=</span> <span class="nv">f</span><span class="o">.</span><span class="py">_1</span>
          <span class="o">^</span>
<span class="nv">Test</span><span class="o">.</span><span class="py">scala</span><span class="k">:</span><span class="err">4</span><span class="kt">:</span> <span class="kt">warning:</span> <span class="kt">reflective</span> <span class="kt">access</span> <span class="kt">of</span> <span class="kt">structural</span> <span class="k">type</span> <span class="kt">member</span> <span class="kt">method</span> <span class="kt">bar</span> <span class="o">[</span><span class="kt">...</span><span class="o">]</span>
  <span class="k">def</span> <span class="nf">h</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="o">{</span> <span class="kt">def</span> <span class="kt">bar:</span> <span class="kt">Int</span> <span class="o">})</span> <span class="k">=</span> <span class="nv">x</span><span class="o">.</span><span class="py">bar</span>
                                 <span class="o">^</span>
<span class="mi">3</span> <span class="n">warnings</span>
</code></pre></div></div>

<p>The Scala compiler supports additional compile-time checks that are not enabled by default to identify potential programming errors or discouraged code patterns. These checks are enabled using compiler flags and result in additional warnings being issued:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-Wunused</code> (<code class="language-plaintext highlighter-rouge">-Ywarn-unused</code> in 2.12) warns about unused entities, for example unused local variables or unused imports. Run <code class="language-plaintext highlighter-rouge">scalac -Wunused:help</code> (<code class="language-plaintext highlighter-rouge">-Ywarn-unused:help</code> in 2.12) for details.</li>
  <li><code class="language-plaintext highlighter-rouge">-Xlint</code> enables a number of additional checks, for example when a type argument is inferred to <code class="language-plaintext highlighter-rouge">Any</code>. See <code class="language-plaintext highlighter-rouge">scalac -Xlint:help</code> for details.</li>
  <li><code class="language-plaintext highlighter-rouge">scalac -W</code> (<code class="language-plaintext highlighter-rouge">-Y</code> in 2.12) lists a few additional warnings, such as <code class="language-plaintext highlighter-rouge">-Wdead-code</code> (<code class="language-plaintext highlighter-rouge">-Ywarn-dead-code</code> in 2.12).</li>
</ul>

<p>Finally, warnings can be globally disabled using <code class="language-plaintext highlighter-rouge">-nowarn</code> or turned into errors with <code class="language-plaintext highlighter-rouge">-Werror</code> (<code class="language-plaintext highlighter-rouge">-Xfatal-warnings</code> in 2.12). The new <code class="language-plaintext highlighter-rouge">-Wconf</code> compiler option allows for  more fine-grained configuration.</p>

<h2 id="configuring-warnings">Configuring warnings</h2>

<p>The <code class="language-plaintext highlighter-rouge">-Wconf</code> compiler option allows filtering compiler warnings and applying an action to messages matching the filter. For example, the default configuration</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-Wconf:cat=deprecation:ws,cat=feature:ws,cat=optimizer:ws
</code></pre></div></div>

<p>defines that warnings with category <code class="language-plaintext highlighter-rouge">deprecation</code> should be summarized as a single warning (<code class="language-plaintext highlighter-rouge">ws</code>, which means <code class="language-plaintext highlighter-rouge">warning-summary</code>), and the same for feature and optimizer warnings.</p>

<p>Running <code class="language-plaintext highlighter-rouge">scalac -Wconf:help</code> explains how to specify a configuration, but we take a detailed look in the following sections. Generally, the syntax is <code class="language-plaintext highlighter-rouge">-Wconf:&lt;filters&gt;:&lt;action&gt;,&lt;filters&gt;:&lt;action&gt;,...</code>.</p>

<h3 id="actions">Actions</h3>

<p>The <code class="language-plaintext highlighter-rouge">&lt;action&gt;</code> defines how warnings matching a filter are handled:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">error</code> / <code class="language-plaintext highlighter-rouge">e</code> reports them as errors.</li>
  <li><code class="language-plaintext highlighter-rouge">warning</code> / <code class="language-plaintext highlighter-rouge">w</code> reports them as warnings (this is the default).</li>
  <li><code class="language-plaintext highlighter-rouge">info</code> / <code class="language-plaintext highlighter-rouge">i</code> reports them without counting them as warnings, and without causing <code class="language-plaintext highlighter-rouge">-Werror</code> to fail.</li>
  <li><code class="language-plaintext highlighter-rouge">silent</code> / <code class="language-plaintext highlighter-rouge">s</code> ignores them.</li>
</ul>

<p>Like deprecations and feature warnings, a group of <code class="language-plaintext highlighter-rouge">warning</code>s and <code class="language-plaintext highlighter-rouge">info</code>s can be reported as a single summary (<code class="language-plaintext highlighter-rouge">warning-summary</code> / <code class="language-plaintext highlighter-rouge">ws</code> and <code class="language-plaintext highlighter-rouge">info-summary</code> / <code class="language-plaintext highlighter-rouge">is</code>). Specifying <code class="language-plaintext highlighter-rouge">-Wconf:cat=deprecation:w</code> overrides the default and reports every deprecation warning individually â€“ this is exactly what the <code class="language-plaintext highlighter-rouge">-deprecation</code> flag does internally.</p>

<p>Warnings and infos can be issued in verbose mode (<code class="language-plaintext highlighter-rouge">warning-verbose</code> / <code class="language-plaintext highlighter-rouge">wv</code> and <code class="language-plaintext highlighter-rouge">info-verbose</code> / <code class="language-plaintext highlighter-rouge">iv</code>). This displays additional information about the warning that is helpful for writing filters. For example:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">$</span><span class="o">&gt;</span> <span class="n">scalac</span> <span class="o">-</span><span class="nc">Wconf</span><span class="k">:</span><span class="kt">any:wv</span> <span class="kt">Test.scala</span>
<span class="nv">Test</span><span class="o">.</span><span class="py">scala</span><span class="k">:</span><span class="err">4</span><span class="kt">:</span> <span class="kt">warning:</span> <span class="err">[</span><span class="kt">deprecation</span> <span class="kt">@</span> <span class="kt">my.app.C.f</span> <span class="kt">|</span> <span class="kt">origin</span><span class="o">=</span><span class="nv">scala</span><span class="o">.</span><span class="py">Predef</span><span class="o">.</span><span class="py">ArrowAssoc</span><span class="o">.â†’</span> <span class="o">|</span> <span class="n">version</span><span class="k">=</span><span class="mf">2.13</span><span class="o">.</span><span class="mi">0</span><span class="err">]</span> <span class="n">method</span> <span class="o">â†’</span> <span class="n">in</span> <span class="k">class</span> <span class="nc">ArrowAssoc</span> <span class="n">is</span> <span class="n">deprecated</span> <span class="o">[</span><span class="kt">...</span><span class="o">]</span>
  <span class="k">def</span> <span class="nf">f</span><span class="o">()</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">â†’</span> <span class="mi">2</span>
              <span class="o">^</span>
</code></pre></div></div>

<p>Here, the warning message includes the following additional information:</p>

<ul>
  <li>the warning category <code class="language-plaintext highlighter-rouge">deprecation</code></li>
  <li>the site where the warning is issued <code class="language-plaintext highlighter-rouge">my.app.C.f</code></li>
  <li>the origin of the deprecation <code class="language-plaintext highlighter-rouge">scala.Predef.ArrowAssoc.â†’</code></li>
  <li>the <code class="language-plaintext highlighter-rouge">since</code> version of the deprecation <code class="language-plaintext highlighter-rouge">2.13.0</code></li>
</ul>

<h3 id="filters">Filters</h3>

<p>The actions explained above are always applied to a set of warnings selected by a filter expression. The following filters are available:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">any</code> matches every message.</li>
  <li><code class="language-plaintext highlighter-rouge">cat=deprecation</code> filters according to the message category, for example deprecations (details below).</li>
  <li><code class="language-plaintext highlighter-rouge">msg=regex</code> applies if some part of the message matches the regex.</li>
  <li><code class="language-plaintext highlighter-rouge">site=my\.package\..*</code> filters on the site where the warning is triggered. The regex must match the entityâ€™s full name (<code class="language-plaintext highlighter-rouge">package.Class.method</code>). Note that <code class="language-plaintext highlighter-rouge">.</code> in a regex matches any character while <code class="language-plaintext highlighter-rouge">\.</code> matches a single period.</li>
  <li><code class="language-plaintext highlighter-rouge">src=src_managed/.*</code> filters warnings issued in a source file (details below).</li>
  <li>Deprecation warnings can be filtered on two additional criteria:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">origin=external\.package\..*</code> filters on full name of the deprecated entity.</li>
      <li><code class="language-plaintext highlighter-rouge">since&lt;1.24</code> filters on the <code class="language-plaintext highlighter-rouge">since</code> annotation argument of the deprecated entity (details below).</li>
    </ul>
  </li>
</ul>

<p>Multiple filters can be combined using <code class="language-plaintext highlighter-rouge">&amp;</code> to narrow down the selection. For example, the following configuration turns deprecation warnings for <code class="language-plaintext highlighter-rouge">scala.Predef</code> into errors:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">$</span><span class="o">&gt;</span> <span class="n">scalac</span> <span class="o">'-</span><span class="nc">Wconf</span><span class="k">:</span><span class="kt">cat</span><span class="o">=</span><span class="n">deprecation</span><span class="o">&amp;</span><span class="n">origin</span><span class="k">=</span><span class="n">scala</span><span class="o">\.</span><span class="py">Predef</span><span class="o">\..*:</span><span class="n">e</span><span class="o">'</span> <span class="nv">Test</span><span class="o">.</span><span class="py">scala</span>
<span class="nv">Test</span><span class="o">.</span><span class="py">scala</span><span class="k">:</span><span class="err">4</span><span class="kt">:</span> <span class="kt">error:</span> <span class="kt">method</span> <span class="kt">â†’</span> <span class="kt">in</span> <span class="kt">class</span> <span class="kt">ArrowAssoc</span> <span class="kt">is</span> <span class="kt">deprecated</span> <span class="o">[</span><span class="kt">...</span><span class="o">]</span>
  <span class="k">def</span> <span class="nf">f</span><span class="o">()</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">â†’</span> <span class="mi">2</span>
              <span class="o">^</span>
<span class="mi">1</span> <span class="n">error</span>
</code></pre></div></div>

<p>Note that the <code class="language-plaintext highlighter-rouge">-Wconf:...</code> compiler argument is between quotes (<code class="language-plaintext highlighter-rouge">'</code>) in the command line, which prevents the shell from interpreting characters like <code class="language-plaintext highlighter-rouge">&amp;</code> or <code class="language-plaintext highlighter-rouge">*</code>.</p>

<p>For some of the filters the syntax is not trivial, so we look at them in more detail.</p>

<ul>
  <li><strong>Message category</strong>: Every message has a category that is displayed in verbose mode (<code class="language-plaintext highlighter-rouge">-Wconf:any:wv</code>). The <code class="language-plaintext highlighter-rouge">-Wconf:help</code> option displays the full list of available categories. For example, every <code class="language-plaintext highlighter-rouge">-Xlint</code> warning has its own category (<code class="language-plaintext highlighter-rouge">lint-infer-any</code>), the super-category <code class="language-plaintext highlighter-rouge">lint</code> matches all lint warnings.</li>
  <li><strong>Source file</strong>: By default, the source file filter is a regex that must match the file path relative to any path segment. For example, <code class="language-plaintext highlighter-rouge">b/.*Test.scala</code> matches <code class="language-plaintext highlighter-rouge">/a/b/XTest.scala</code> but not <code class="language-plaintext highlighter-rouge">/ab/Test.scala</code>. If the <code class="language-plaintext highlighter-rouge">-rootdir</code> compiler option is specified, the regex must match the file path relative to that root directory.</li>
  <li><strong>Since version for deprecations</strong>: In a <code class="language-plaintext highlighter-rouge">since&lt;1.24</code> filter expression, valid operators are <code class="language-plaintext highlighter-rouge">&lt;</code>, <code class="language-plaintext highlighter-rouge">=</code> and <code class="language-plaintext highlighter-rouge">&gt;</code> and valid version numbers are <code class="language-plaintext highlighter-rouge">N</code>, <code class="language-plaintext highlighter-rouge">N.M</code> and <code class="language-plaintext highlighter-rouge">N.M.P</code>. Because the <code class="language-plaintext highlighter-rouge">since</code> annotation argument can contain arbitrary text, the first version number found in the text is used for the comparison, for example <code class="language-plaintext highlighter-rouge">1.2.3</code> in <code class="language-plaintext highlighter-rouge">@deprecated("", "some lib 1.2.3-foo")</code>.</li>
</ul>

<h2 id="local-warning-suppression-using-nowarn">Local warning suppression using <code class="language-plaintext highlighter-rouge">@nowarn</code></h2>

<p>The <a href="https://www.scala-lang.org/api/current/scala/annotation/nowarn.html"><code class="language-plaintext highlighter-rouge">@nowarn</code> annotation</a> allows suppressing warnings locally within a source file. It can be applied to method or class definitions, or to individual expressions using the ascription syntax <code class="language-plaintext highlighter-rouge">expression: @nowarn</code>.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nd">@deprecated</span> <span class="k">def</span> <span class="nf">dpr</span> <span class="k">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">dpr</span><span class="k">:</span> <span class="kt">Int</span>

<span class="c1">// don't issue any warnings for code in method `f`</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="nd">@annotation</span><span class="o">.</span><span class="py">nowarn</span> <span class="k">def</span> <span class="nf">f</span> <span class="k">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">;</span> <span class="n">dpr</span> <span class="o">}</span>
<span class="k">def</span> <span class="nf">f</span><span class="k">:</span> <span class="kt">Int</span>

<span class="c1">// don't issue the "a pure expression does nothing in statement position" warning</span>
<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">f</span> <span class="k">=</span> <span class="o">{</span>
     <span class="o">|</span>   <span class="mi">1</span><span class="k">:</span> <span class="kt">@annotation.nowarn</span> 
     <span class="o">|</span>   <span class="n">dpr</span>
     <span class="o">|</span> <span class="o">}</span>
         <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">method</span> <span class="kt">dpr</span> <span class="kt">is</span> <span class="kt">deprecated</span>
<span class="k">def</span> <span class="nf">f</span><span class="k">:</span> <span class="kt">Int</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">@nowarn</code> annotation has an optional value parameter to silence warnings selectively, where the syntax is the same as a filter expression of the <code class="language-plaintext highlighter-rouge">-Wconf</code> compiler option.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nd">@annotation</span><span class="o">.</span><span class="py">nowarn</span><span class="o">(</span><span class="s">"msg=pure expression does nothing"</span><span class="o">)</span> <span class="k">def</span> <span class="nf">f</span> <span class="k">=</span> <span class="o">{</span> <span class="mi">1</span><span class="o">;</span> <span class="n">dpr</span> <span class="o">}</span>
                                                                           <span class="o">^</span>
       <span class="n">warning</span><span class="k">:</span> <span class="kt">method</span> <span class="kt">dpr</span> <span class="kt">is</span> <span class="kt">deprecated</span>
<span class="k">def</span> <span class="nf">f</span><span class="k">:</span> <span class="kt">Int</span>
</code></pre></div></div>

<p>To ensure that <code class="language-plaintext highlighter-rouge">@nowarn</code> annotations actually suppress warnings, enable <code class="language-plaintext highlighter-rouge">-Xlint:unused</code> or <code class="language-plaintext highlighter-rouge">-Wunused:nowarn</code>. With this option, the compiler checks that every <code class="language-plaintext highlighter-rouge">@nowarn</code> annotation suppresses at least one warning and issues a warning otherwise:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; @annotation.nowarn def f = 1
        ^
       warning: @nowarn annotation does not suppress any warnings
def f: Int
</code></pre></div></div>

<h2 id="credits">Credits</h2>

<p>The <code class="language-plaintext highlighter-rouge">@nowarn</code> annotation is heavily inspired from the fantastic <a href="https://github.com/ghik/silencer">silencer compiler plugin</a> by <a href="https://github.com/ghik">Roman Janusz</a>, so I thank Roman for inventing, implementing and maintaining this feature before it was adopted by the compiler.</p>

				</div>
			</div>
			<!-- TOC -->
			
<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5>Contents</h5>
		<div class="inner-toc" id="sidebar-toc">

		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/scala-lang/blob/master/_posts/2021-01-12-configuring-and-suppressing-warnings.md" data-proofer-ignore><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>


		</div>
	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              
                <li><a href="https://docs.scala-lang.org/getting-started.html">Getting Started</a></li>
              
            
              
                <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
              
            
              
                <li><a href="https://docs.scala-lang.org/overviews">Overviews/Guides</a></li>
              
            
              
                <li><a href="https://scala-lang.org/files/archive/spec/2.13/">Language Specification</a></li>
              
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              
                <li><a href="/download/">Current Version</a></li>
              
            
              
                <li><a href="/download/all.html">All versions</a></li>
              
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              
                <li><a href="/community/">Community</a></li>
              
            
              
                <li><a href="/community/index.html#forums">Forums</a></li>
              
            
              
                <li><a href="/community/index.html#chat-rooms">Chat</a></li>
              
            
              
                <li><a href="/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
              
            
              
                <li><a href="https://scala.epfl.ch/">The Scala Center</a></li>
              
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              
                <li><a href="/contribute/">How to help</a></li>
              
            
              
                <li><a href="/contribute/bug-reporting-guide.html">Report an Issue</a></li>
              
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              
                <li><a href="/blog/">Blog</a></li>
              
            
              
                <li><a href="/conduct.html">Code of Conduct</a></li>
              
            
              
                <li><a href="/license/">License</a></li>
              
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              
                <li><a href="https://github.com/scala">GitHub</a></li>
              
            
              
                 <!-- special case Manstodon to validate with rel="me" -->
                <li><a rel="me" href="https://fosstodon.org/@scala_lang">Mastodon</a></li>
              
            
              
                <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
              
            
              
                <li><a href="https://discord.com/invite/scala">Discord</a></li>
              
            
              
                <li><a href="https://www.linkedin.com/company/scala-center/">LinkedIn</a></li>
              
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p>Copyright Â© 2002-2023 Ã‰cole Polytechnique FÃ©dÃ©rale <br>Lausanne (EPFL) Lausanne, Switzerland</p>
        <img src="/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
  </footer>

    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="/resources/js/vendor/jquery.autocomplete.js" type="text/javascript" ></script>

    <!-- tweet feed -->
    <script src="/resources/js/tweetMachine-update.js" type="text/javascript" ></script>

    <!-- prettify js -->
    <script src="/resources/js/vendor/prettify/prettify.js" type="text/javascript" ></script>
    <script src="/resources/js/vendor/prettify/lang-scala.js" type="text/javascript" ></script>

    <!-- unslider js -->
    <script src="/resources/js/vendor/unslider.js" type="text/javascript" ></script>

    <!-- Highlight -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/languages/scala.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/languages/java.min.js" type="text/javascript"></script>

    <!-- Custom Syntax Highlight -->
    <script src="/resources/js/hljs-scala3.js" type="text/javascript"></script>

    <!-- CodeMirror -->
    <script src="/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
    <script src="/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

    <!-- TOC -->
    
      <script src="/resources/js/vendor/jquery.sticky.js" type="text/javascript" ></script>
      <script src="/resources/js/vendor/toc.js" type="text/javascript" ></script>
    

    <!-- Blog search -->
    <script src="/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

    <!-- Custom javascript -->
    <script src="/resources/js/functions.js" type="text/javascript"></script>
    <script defer data-domain="scala-lang.org" src="https://plausible.scala-lang.org/js/script.js"></script>
  </body>
</html>
